<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Marianne – AR Viewer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{
      margin:0;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      height:100vh;
      font-family:sans-serif;
      text-align:center;
      gap:1.5rem;
    }
    #iosLink{
      display:none;                 /* rendu visible via JS sur iOS */
      padding:1rem 1.8rem;
      font-size:20px;
      background:#007AFF;
      color:#fff;
      border-radius:8px;
      text-decoration:none;
    }
  </style>
</head>
<body>
  <h2>Chargement de l’expérience AR…</h2>

  <!-- Bouton « Voir en AR » pour iOS si la redirection silencieuse est bloquée -->
  <a id="iosLink" href="Marianne_fbx.usdz" rel="ar">Voir en AR (iPhone)</a>

  <script>
    /* Détection fiable iOS / iPadOS */
    const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) ||
                  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 2);

    if (isiOS) {
      /* 1) On affiche le bouton pour garantir un geste utilisateur */
      document.getElementById('iosLink').style.display = 'inline-block';

      /* 2) On tente quand même la redirection automatique (Quick Look) */
      window.location.href = 'Marianne_fbx.usdz';
    } else {
      /* Android : Scene Viewer avec lien encodé vers le .glb */
      const glbURL = encodeURIComponent(
        'https://DDC20252.github.io/marianne-ar/Marianne_fbx.glb'
      );
      window.location.href =
        `https://arvr.google.com/scene-viewer/1.0?file=${glbURL}&title=Marianne&mode=ar_only`;
    }

    /* Fallback : si l’appareil n’est ni iOS ni Android ARCore */
    const isAndroid = /Android/.test(navigator.userAgent);
    if (!isiOS && !isAndroid) {
      document.body.innerHTML =
        '<div style="padding:2rem"><h2>Appareil non compatible</h2>' +
        '<p>Ce modèle AR fonctionne uniquement sur&nbsp;:</p>' +
        '<ul style="text-align:left;max-width:320px;margin:0 auto">' +
        '<li>iPhone / iPad • iOS 12 +</li>' +
        '<li>Smartphone Android compatible ARCore</li>' +
        '</ul></div>';
    }
  </script>
</body>
</html>


